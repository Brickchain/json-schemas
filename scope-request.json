{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://developer.brickchain.com/schemas/scope-request.json",
    "title": "Scope Request",
    "description": "This is the Brickchain Scope Request schema. A client will use the Scope Request to fill in missing scopes for using a service.",
    "type": "object",
    "allOf": [ { "$ref": "https://developer.brickchain.com/schemas/base.json" } ],
    "properties": {
        "replyTo": {
            "type": "array",
            "item": {
                "type": "string",
                "format": "uri",
                "description": "A callback address of where to send a response."
            },
            "description": "A list of callback addresses of where to send a response."
        },
        "scopes": {
            "type": "array",
            "item": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "description": "The name of the Scope" },
                    "link": { "type": "string", "format": "uri", "description": "An URI of where to retrieve a fact of this type of fact." },
                    "required": {"type": "boolean", "description": "This fact may be optional or required."}
                },
                "description": "The Scope object contains the type of scope, and a link of where to get it.",
                "required": "name"
            },
            "description": "An array of Scope objects."
        },
        "encryptTo": {
            "type": "array",
            "item": {
                "type": "object",
                "description": "A JWK with a public key."
            },
            "description": "encryptTo specifies what recipients to encrypt the response to."
        },
        "keyLevel": {
            "type": "integer",
            "description": "TODO: The required key level"
        },
        "contract": {
            "type": "object",
            "description": "The Contract, a message to display to the user."
        }
    },
    "required": [
        "replyTo",
        "scopes"    ]
}
